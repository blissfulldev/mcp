services:
  aws-diagram:
    build:
      context: ./src/aws-diagram-mcp-server
      dockerfile: Dockerfile
    container_name: aws-diagram
    ports:
      - "8001:8001"
    networks:
      - mcp_net
    volumes:
      - ${DIAGRAMS_VOLUME:-./src/aws-diagram-mcp-server/generated-diagrams}:/app/generated-diagrams
  
  core-mcp:
    build:
      context: ./src/core-mcp-server
      dockerfile: Dockerfile
    container_name: core-mcp
    ports:
      - "8000:8000"
    networks:
      - mcp_net

  terraform-mcp:
    build:
      context: ./src/terraform-mcp-server
      dockerfile: Dockerfile
    container_name: terraform-mcp
    ports:
      - "8002:8002"
    networks:
      - mcp_net
    volumes:
      - ${TERRAFORM_VOLUME:-./src/terraform-mcp-server/terraform-projects}:/app/terraform-projects

networks:
  mcp_net:
    external: true
    name: mcp_net
    driver: bridge